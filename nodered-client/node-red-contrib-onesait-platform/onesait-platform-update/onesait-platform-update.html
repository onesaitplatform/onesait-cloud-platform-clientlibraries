<html>
	<script type="text/javascript">
		RED.nodes.registerType('onesait-platform-update',{
			category: 'onesait-platform',
			color: '#C0DEED',
			defaults: {
				name: {value:""},
				ontology: {value:""},
				server: {value:"", type:"onesait-platform-connection-config"},
				check: {value:false},
				query: {value:""},
				queryType: {value:""},
				updateType: {value:""},
				messageId: {value:""}
			},
			inputs: 1,
			outputs:1,
			icon: "platform_logo.png",
			label: function() {
				return this.name||"onesait-platform-update";
			},
			oneditprepare: function() {
				if($("#node-input-check").is(':checked')){
					$("#node-input-ontology").removeProp('disabled');
					$("#node-input-query").removeProp('disabled');
					$("#node-input-queryType").removeProp('disabled');
					$("#node-input-updateType").removeProp('disabled');
					$("#node-input-messageId").removeProp('disabled');
				}else{
					$("#node-input-ontology").prop('disabled',true);
					$("#node-input-query").prop('disabled',true);
					$("#node-input-queryType").prop('disabled',true);
					$("#node-input-updateType").prop('disabled',true);
					$("#node-input-messageId").prop('disabled',true);
					$("#node-input-ontology").val('');
					$("#node-input-query").val('');
					$("#node-input-queryType").val('');
					$("#node-input-updateType").val('');
					$("#node-input-messageId").val('');
				}

				$("#node-input-check").click(function() {
					var check = $("#node-input-check").is(':checked');
					var ontologia = $("#node-input-ontology").val();
					if(check){
						$("#node-input-ontology").removeProp('disabled');
						$("#node-input-query").removeProp('disabled');
						$("#node-input-queryType").removeProp('disabled');
						$("#node-input-updateType").removeProp('disabled');
						$("#node-input-messageId").removeProp('disabled');
					} else{
						$("#node-input-ontology").prop('disabled',true);
						$("#node-input-query").prop('disabled',true);
						$("#node-input-queryType").prop('disabled',true);
						$("#node-input-updateType").prop('disabled',true);
						$("#node-input-messageId").prop('disabled',true);
						$("#node-input-ontology").val('');
						$("#node-input-query").val('');
						$("#node-input-queryType").val('');
						$("#node-input-updateType").val('');
						$("#node-input-messageId").val('');
					}

				});

				$("#node-input-updateType").change(function() {
					var type = $("#node-input-updateType").val();
					if(type!=null){
						if(type=="UPDATE_BY_ID"){
							$("#node-input-messageId").removeProp('disabled');
						} else{
							$("#node-input-messageId").prop('disabled',true);
							$("#node-input-messageId").val('');
						}
					}
				});


			}
		});
	</script>

	<script type="text/x-red" data-template-name="onesait-platform-update">
		<div class="form-row">
			<label for="node-input-name"><i class="icon-tag"></i> Name</label>
			<input type="text" id="node-input-name" placeholder="Name">
		</div>
		<div class="form-row">
			<label> </label>
			<input type="checkbox" id="node-input-check" style="display: inline-block; width: auto; vertical-align: top;">
			<label for="node-input-check" style="width: 70%;"> Insert the data manually</label>
			<label id="label-ontology" for="node-input-ontology" ><i class="icon-file"></i> Ontology</label>
			<input type="text" id="node-input-ontology" placeholder="OntologÃ­a" disabled  />
		</div>
		<div class="form-row">
			<label for="node-input-updateType"><i class="icon-file"></i> Update Type</label>
			<select id="node-input-updateType" value="" placeholder="Update type" disabled>
				<option value="UPDATE"> UPDATE</option>
				<option value="UPDATE_BY_ID"> UPDATE_BY_ID</option>
			</select>
		</div>
		<div class="form-row">
			<label for="node-input-messageId"><i class="icon-file"></i> Id</label>
			<input type="text" id="node-input-messageId" placeholder="Id" disabled />
		</div>
		<div class="form-row">
			<label for="node-input-query"><i class="icon-file"></i> Query</label>
			<input type="text" id="node-input-query" placeholder="Query" disabled />
		</div>
		<div class="form-row">
			<label for="node-input-queryType"><i class="icon-file"></i> Query Type</label>
			<select id="node-input-queryType" placeholder="Query type" disabled>
				<!--option value="SQL"> SQL</option-->
				<option value="NATIVE"> NATIVE</option>
			</select>
		</div>
		<div class="form-row">
			<label for="node-input-server"><i class="icon-file"></i> Server</label>
			<input type="text" id="node-input-server" placeholder="Server">
		</div>
		<script
	</script>
	<script type="text/x-red" data-help-name="onesait-platform-update">
		<span><img style="margin-left: 5px;" src="icons/platform_logo.png"/><h2 style="display:inline"> onesait-platform</h2>
		<p>Node updating data in an ontology</p>
		<p><code>Ontology</code> Name of the ontology if the checkbox is selected, else the name of the ontology have to go in the <code>msg.ontology</code></p>
		<p><code>UpdateType</code> Type of update, update by query or id are supported, if checkbox is unselected the types have go fo in the <code>msg.updateType</code>. Available options: (<code>UPDATE, UPDATE_BY_ID</code>)</p>
		<p><code>messageId</code> Id reference if UPDATE_BY_ID is selected, if checkbox is unselected, the name of the messageId have to go in the <code>msg.messageId</code></p>
		<p><code>Query</code> Query to update if the checkbox is selected, else the query have to go in the <code>msg.query</code></p>
		<!--p><code>Query Type</code> Query Type of the query if the checkbox is selected, else the query type have to go in the <code>msg.queryType</code></p-->
	</script>

</html>
